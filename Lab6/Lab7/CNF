from sympy.logic.boolalg import Or, And, Not
from sympy import symbols

raining, wet = symbols('raining wet')
knowledge_base = [
    Or(Not(raining), wet),  # ¬raining ∨ wet
    raining                 # raining
]

# The query to prove: "The ground is wet."
query = wet

# Negate the query for resolution (proof by contradiction)
negated_query = Not(query)

# Add negated query to the KB in CNF form
knowledge_base.append(negated_query)

def resolution(clauses):
    # Naive resolution for 2 clauses at a time
    new = set()
    while True:
        pairs = [(clauses[i], clauses[j])
                 for i in range(len(clauses))
                 for j in range(i + 1, len(clauses))]
        for (ci, cj) in pairs:
            resolvent = resolve(ci, cj)
            if resolvent == False:
                continue
            if resolvent == set():
                # Empty clause found: contradiction
                return True
            new.add(resolvent)
        if new.issubset(set(clauses)):
            return False
        for c in new:
            clauses.append(c)

def resolve(ci, cj):
    # Very basic unification for demonstration
    if isinstance(ci, Not) and isinstance(cj, Or):
        for arg in cj.args:
            if ci == arg:
                return set(arg for arg in cj.args if arg != ci)
    if isinstance(cj, Not) and isinstance(ci, Or):
        for arg in ci.args:
            if cj == arg:
                return set(arg for arg in ci.args if arg != cj)
    return False

result = resolution(knowledge_base)
print('Proved?' if result else 'Not proved.')
